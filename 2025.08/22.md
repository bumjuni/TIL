# 아두이노

모두의 아두이노(모토 다카요리/장진희) p.20 ~ 67

---

## 아두이노 개념

- 오픈 소스 하드웨어
    
    ⇒ 회로도, 사양이 모두 공개되어 자유롭게 수정 및 판매 가능
    
- 제품의 프로토타이핑에 흔히 사용
- 아두이노 프로그램 = “스케치”
    
    확장 보드 = “실드”
    
    처리 흐름 및 프로세스 = “레시피”
    

### **구성 요소**

- 아두이노 = 마이크로컨트롤러 + 통합개발환경
- 통합개발환경(IDE)
    
    : 아두이노 프로그램 개발 + 컴퓨터와 하드웨어 간 통신(시리얼 통신)
    
- 실드
    
    : 아두이노의 확장 보드로, 기능에 따라 무선 통신, 데이터 저장 등을 할 수 있음
    

### **인터페이스**

- USB 전원 커넥터 → 컴퓨터와 연결하여 5V 전원 공급 및 시리얼 통신(D0, D1포트 사용)
- 외부 전원 커넥터 → 7~12V 외부 직류 전원
- LED → L, TX, RX에 해당하는 3개의 LED. 시리얼 통신 시 동작함
- 아날로그 입력 포트 → A0~A5, 동일한 포트를 디지털 입출력 포트 D14~19로도 사용 가능
- 아날로그 출력 포트 → D3, D5, D6, D9, D10, D11, PWM(펄스 폭 변조) 사용
- 디지털 입출력 포트 → D0~D13 + 아날로그 입력 포트 D14~19, 그 중  D0, D1은 하드웨어 시리얼 통신
- 전원과 접지 포트 → 3.3V 혹은 5V 전원과 3개의 GND 포트
- I2C, SPI 포트 → 동기식 버스 시리얼 통신, 짧은 거리에서 빠른 속도
    - I2C버스: SCL(Serial Clock) 신호선 + 양방향 SDA(Serial Data)
    - SPI버스: SCK(Serial Clock) 신호선 + 단방향 SD0, SD1
- UART(시리얼 통신) 포트 → 비동기 시리얼 통신 D0(=RX), D1(=TX)

### **IDE 사용**

- 시리얼 모니터: 컴퓨터와 아두이노가 USB를 통해 수행하는 시리얼 통신 내용이 표시됨

### **아두이노의 통신**

1. 아날로그 통신
2. 디지털 통신
3. 시리얼 통신: UART(비동기식), SPI, I2C(동기식)

## 아두이노 작동

### **컴퓨터 연결**

- ⭐ USB케이블로 컴퓨터와 통신할 때는 반드시 D0, D1 포트에 연결된 부품 해제 ⭐
    
    ⇒ 컴퓨터와 아두이노가 D0, D1포트를 통해 UART 시리얼 통신하기 때문
    
    D0, D1포트에 뭔가 연결되어 있다면 아래 에러 발생
    
    ```cpp
    avrdude: stk500_getsync(): not in sync: resp=0x00
    ```
    
- 아두이노와 컴퓨터가 통신 상태일 때 아두이노의 LED3개 깜빡임

### **스케치 작성**

- 파일 > 예제에서 예제 파일 불러올 수 있음
- 기본적으로 C++문법과 유사하나 일부 다름(변수 크기 등)
- `void setup()`
    - 초기 설정 함수
    - ⭐아무것도 작성하지 않더라도 반드시 선언해야 함 ⭐
    - 아두이노 부팅 시 가장 먼저 딱 한번 실행됨
    - 반환값, 매개변수는 없음
- `void loop()`
    - 반복 함수
    - ⭐아무것도 작성하지 않더라도 반드시 선언해야 함 ⭐
    - 아두이노가 실행되는 동안 함수 내용을 무한반복
    - 반환값, 매개변수 없음
- 내장 함수
    - `void pinMode(pin, mode)`
        
        : 포트 번호(`pin` → `int`)의 입출력 모드(`mode` → `INPUT`, `OUTPUT`, `INPUT_PULLUP`) 설정
        
    - `void digitalWrite(pin, value)`
        
        : 포트 번호(`pin` → `int`)의 출력값(`value` → `LOW`, `HIGH`) 설정
        
        HIGH = 1 ≒ 5V, LOW = 0 ≒ 0V
        
    - `void delay(ms)`
        
        : 일정 시간(`ms` → `unsigned long`)만큼 프로그램 대기
